// packages/core/utils/constants.ts
var TagState = {
  //标签模式
  initial: 1,
  // 初始状态
  tagOpen: 2,
  //标签开始状态
  tagName: 3,
  // 标签名称状态
  text: 4,
  //文本状态
  tagEnd: 5,
  //结束标签状态
  tagEndName: 6
  // 结束标签名称状态
};
var toggleMode = (context, mode) => {
  context.oldMode = context.mode;
  context.mode = mode;
};
var revertMode = (context) => {
  context.mode = context.oldMode;
};

// packages/core/utils/advance.ts
function advanceBy(context, by) {
  context.source = context.source.slice(by);
}
function advanceSpaces(context) {
  let { source } = context;
  context.source = source.replace(/^[\r\f\t\n ]+/, "");
}

// packages/core/utils/element.ts
var unary = [
  "br",
  "hr",
  "img",
  "input",
  "meta",
  "link",
  "area",
  "base",
  "col",
  "command",
  "embed",
  "keygen",
  "param",
  "source",
  "track",
  "wbr"
];
function isUnary(tagName) {
  return unary.includes(tagName);
}
function closeElement(element) {
  if (element.unary) {
    element.tagStatus = TagState.tagEnd;
  }
}

// packages/core/utils/data.ts
function deepCopy(obj, cache = /* @__PURE__ */ new WeakMap()) {
  if (obj === null || typeof obj !== "object") {
    return obj;
  }
  if (cache.has(obj)) {
    return cache.get(obj);
  }
  const copy = Array.isArray(obj) ? [] : {};
  cache.set(obj, copy);
  for (let key in obj) {
    copy[key] = deepCopy(obj[key], cache);
  }
  return copy;
}

// packages/core/htmlParser.ts
function tokenize(template) {
  const tokens = [];
  return tokens;
}
var HTMLParser = class {
  _options;
  constructor(options = {}) {
    this._options = options;
  }
  parser(template) {
    const root = {
      type: "Root" /* Root */,
      children: []
    };
    const context = {
      source: template,
      mode: 0 /* DATA */,
      oldMode: 0 /* DATA */,
      type: "Root" /* Root */,
      children: [],
      parentNode: root
    };
    root.children = this.parseChildren(context);
    return root;
  }
  parseChildren(context, ancestors = []) {
    let nodes = [];
    while (this.isEnd(context, ancestors)) {
      const { mode, source, parentNode } = context;
      let node;
      if (mode === 0 /* DATA */ || mode === 1 /* RCDATA */) {
        if (source.startsWith("<![CDATA[")) {
          toggleMode(context, 3 /* CDATA */);
          continue;
        } else if (mode === 0 /* DATA */ && source[0] === "<") {
          if (source[1] === "!") {
            if (source.startsWith("<!--")) {
              node = this.parseComment(context, ancestors);
            }
          } else if (/[a-z]/i.test(source[1])) {
            node = this.parseElement(context, ancestors);
          } else if (source[1] === "/") {
            return nodes;
          }
        } else if (mode === 1 /* RCDATA */ || mode === 0 /* DATA */ && source[1] === "/") {
          throw new Error("\u4E0D\u662FDATA\u6A21\u5F0F");
        } else if (source.startsWith("{{")) {
          node = this.parseInterpolation(context);
        }
        if (!node) {
          node = this.parseText(context);
        }
        node.parentNode = parentNode;
        nodes.push(node);
      } else if (mode === 3 /* CDATA */) {
        if (source.startsWith("<![CDATA[")) {
          node = this.parseCDATA(context, ancestors);
          revertMode(context);
        }
        nodes.push(node);
      }
    }
    return nodes;
  }
  isEnd(context, ancestors) {
    if (context.source) {
      return true;
    }
  }
  parseText(context) {
    let { mode, source } = context;
    const match = source.match(/[^<>]*/);
    let content = "";
    if (match[0]) {
      advanceBy(context, match[0].length);
      content = match[0];
    }
    return {
      type: "Text" /* Text */,
      content,
      parentNode: context.parentNode
    };
  }
  parseInterpolation(context) {
    const { source } = context;
    const match = source.match(/^\{\{\s*(.*?)\s*\}\}/);
    advanceBy(context, match[0].length);
    return {
      type: "Interpolation" /* Interpolation */,
      content: [match[0], match[1]],
      parentNode: context.parentNode
    };
  }
  parseElement(context, ancestors) {
    let { mode, source } = context;
    const match = source.match(/<([a-z][a-zA-Z-]*)/);
    context.source = source.slice(match[0].length);
    const tagName = match[1];
    const element = {
      //这个状态栈，子元素需要匹配它是否需要闭合,或者它可能是自闭合的标签
      tagStatus: TagState.tagName,
      //内容状态
      tagName,
      //标签名称
      unary: false
    };
    if (isUnary(tagName)) {
      element.unary = true;
      closeElement(element);
    }
    const attrs = this.parseAttribute(context, element);
    const ElementNode2 = {
      type: "Element" /* Element */,
      tagName,
      children: [],
      attrs,
      parentNode: context.parentNode
    };
    if (!element.unary) {
      ancestors.push(element);
      element.tagStatus = TagState.text;
      const matchTagEnd = context.source.match(`(.*?)<\\/${tagName}>`);
      if (matchTagEnd) {
        context.parentNode = ElementNode2;
        ElementNode2.children = this.parseChildren(context, ancestors);
      } else {
        throw new Error("\u6807\u7B7E\u5FC5\u987B\u8981\u6709\u7ED3\u675F");
      }
      const ancestor = ancestors.pop();
      if (ancestor) {
        advanceBy(context, ancestor.tagName.length + 2);
        advanceSpaces(context);
        advanceBy(context, 1);
      } else {
        throw new Error("\u4E0D\u5408\u6CD5\u7684\u6807\u7B7E");
      }
    }
    return ElementNode2;
  }
  parseAttribute(context, element) {
    const attrReg = /(:?[a-zA-Z][a-zA-Z-]*)\s*(?:(=)\s*(?:(["'])([^"'<>]*)\3|([^\s"'<>]*)))?/;
    const attributes = [];
    advanceSpaces(context);
    let attrMatch;
    while (context.source[0] !== "<" && context.source[0] !== ">") {
      attrMatch = context.source.match(attrReg);
      advanceBy(context, attrMatch[0].length);
      attributes.push([attrMatch[0], attrMatch[1], attrMatch[2], attrMatch[4]]);
      advanceSpaces(context);
      if (context.source[0] === "/" && element.unary) {
        advanceBy(context, 1);
      }
      advanceSpaces(context);
    }
    advanceBy(context, 1);
    return attributes;
  }
  //注释
  parseComment(context, ancestors) {
    let { source } = context;
    let value = "";
    source = source.slice(4);
    source = source.replace(/([\s\S]*?)(-->)/, function(match, $1, $2) {
      value = $1;
      return $2 ? $2 : "";
    });
    if (source.startsWith("-->")) {
      context.source = source.slice(3);
    } else {
      value = context.source;
      context.source = "";
    }
    return {
      type: "Comment" /* Comment */,
      content: value,
      parentNode: context.parentNode
    };
  }
  parseCDATA(context, ancestors) {
    const cdataMatch = context.source.match(/^<!\[CDATA\[([\s\S]*?)\]\]/);
    advanceBy(context, cdataMatch[0].length);
    return {
      type: "CDATA" /* CDATA */,
      content: cdataMatch[1],
      parentNode: context.parentNode
    };
  }
};

// packages/core/generate.ts
function generate(node, options = {}) {
  if (node.type === "Root" /* Root */) {
    return generateChildrenCode(node.children);
  } else if (node.type === "Element" /* Element */) {
    const attrs = generateAttributesCode(node.attrs);
    const children = generateChildrenCode(node.children);
    return `<${node.tagName}${attrs}>${children}</${node.tagName}>`;
  } else if (node.type === "Text" /* Text */) {
    return node.content;
  }
}
function generateAttributesCode(attrs) {
  if (!Array.isArray(attrs) || attrs.length === 0) {
    return "";
  }
  return " " + attrs.map((attr) => `${attr.name}="${attr.value}"`).join(" ");
}
function generateChildrenCode(children) {
  if (!Array.isArray(children) || children.length === 0) {
    return "";
  }
  return children.map((child) => generate(child)).join("");
}

// packages/core/transform.ts
function transform(ast, options = {}) {
  const { nodeTransforms = [], directiveTransforms = {}, diffAst = {} } = options;
  const context = {
    ast: deepCopy(ast),
    diffAst: deepCopy(diffAst),
    nodeTransforms: [
      // transformIf,
      // transformFor,
      // transformText,
      // transformDiff,
      // transformElement,
      ...nodeTransforms.filter((item) => Array.isArray(item) ? item[0] !== "all" : true)
    ],
    directiveTransforms: {
      // on: transformOn,
      // bind: transformBind,
      // model: transformModel
      ...directiveTransforms
    }
  };
  const nodeTransformAll = nodeTransforms.filter((item) => Array.isArray(item) && item[0] === "all").flatMap((f) => f[1]);
  callNodeTransforms(context.ast, {
    ...context,
    nodeTransforms: nodeTransformAll
  });
  traverseNode(context.ast, context);
  return generate(context.ast, options);
}
function callNodeTransforms(node, context) {
  const { nodeTransforms, onEnter, onExit } = context;
  const exitFns = [];
  typeof onEnter === "function" && onEnter(node, context);
  for (let i2 = 0; i2 < nodeTransforms.length; i2++) {
    const onExit2 = nodeTransforms[i2](node, context);
    if (onExit2) {
      if (Array.isArray(onExit2)) {
        exitFns.push(...onExit2);
      } else {
        exitFns.push(onExit2);
      }
    }
  }
  typeof onExit === "function" && onExit(node, context);
  let i = exitFns.length;
  while (i--) {
    exitFns[i]();
  }
}
function traverseNode(node, context) {
  callNodeTransforms(node, {
    ...context,
    onEnter: () => {
      context.currentNode = node;
    },
    onExit: () => {
      traverseChildren(node, context);
      context.currentNode = node;
    }
  });
}
function traverseChildren(node, context) {
  if (node.children) {
    for (let i = 0; i < node.children.length; i++) {
      traverseNode(node.children[i], context);
    }
  }
}
export {
  HTMLParser,
  tokenize,
  transform
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vcGFja2FnZXMvY29yZS91dGlscy9jb25zdGFudHMudHMiLCAiLi4vLi4vcGFja2FnZXMvY29yZS91dGlscy9hZHZhbmNlLnRzIiwgIi4uLy4uL3BhY2thZ2VzL2NvcmUvdXRpbHMvZWxlbWVudC50cyIsICIuLi8uLi9wYWNrYWdlcy9jb3JlL3V0aWxzL2RhdGEudHMiLCAiLi4vLi4vcGFja2FnZXMvY29yZS9odG1sUGFyc2VyLnRzIiwgIi4uLy4uL3BhY2thZ2VzL2NvcmUvZ2VuZXJhdGUudHMiLCAiLi4vLi4vcGFja2FnZXMvY29yZS90cmFuc2Zvcm0udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBjb25zdCBMRUdFTkRTID0ge1xyXG4gICAgJ0FEREVEJzogJ2FkZGVkJyxcclxuICAgICdSRU1PVkVEJzogJ3JlbW92ZWQnLFxyXG59XHJcblxyXG4vL1x1NjcwOVx1OTY1MFx1NzJCNlx1NjAwMVx1ODFFQVx1NTJBOFx1NjczQVxyXG5leHBvcnQgZW51bSBUZXh0TW9kZXMge1xyXG4gICAgLy9cdTlFRDhcdThCQTRcdTZBMjFcdTVGMEYgXHU5MDQ3XHU1MjMwXHU1QjU3XHU3QjI2IDwgXHU2NUY2XHVGRjBDXHU0RjFBXHU1MjA3XHU2MzYyXHU1MjMwXHU2ODA3XHU3QjdFXHU1RjAwXHU1OUNCXHU3MkI2XHU2MDAxIFx1OTA0N1x1NTIzMFx1NUI1N1x1N0IyNiAmIFx1NjVGNlx1RkYwQ1x1NEYxQVx1NTIwN1x1NjM2Mlx1NTIzMFx1NUI1N1x1N0IyNlx1NUYxNVx1NzUyOFx1NzJCNlx1NjAwMVx1ODBGRFx1NTkxRlx1NTkwNFx1NzQwNiBIVE1MIFx1NUI1N1x1N0IyNlx1NUI5RVx1NEY1M1xyXG4gICAgREFUQT0wLFxyXG4gICAgLy88dGl0bGU+IFx1NjgwN1x1N0I3RVx1MzAwMTx0ZXh0YXJlYT4gXHU2ODA3XHU3QjdFIFx1OTA0N1x1NTIzMFx1NUI1N1x1N0IyNiA8IFx1NjVGNlx1RkYwQ1x1NTIwN1x1NjM2Mlx1NTIzMCBSQ0RBVEEgbGVzcy10aGFuIHNpZ24gc3RhdGUgXHU3MkI2XHU2MDAxXHU5MDQ3XHU1MjMwXHU1QjU3XHU3QjI2IC9cdUZGMENcdTUyMDdcdTYzNjJcdTUyMzAgUkNEQVRBIFx1NzY4NFx1N0VEM1x1Njc1Rlx1NjgwN1x1N0I3RVx1NzJCNlx1NjAwMVx1NTcyOFx1NEUwRFx1NEY3Rlx1NzUyOFx1NUYxNVx1NzUyOFx1N0IyNlx1NTNGNyAmIFx1NzY4NFx1NjBDNVx1NTFCNVx1NEUwQlx1RkYwQ1JDREFUQSBcdTZBMjFcdTVGMEZcdTRFMERcdTRGMUFcdThCQzZcdTUyMkJcdTY4MDdcdTdCN0VcdUZGMENcdTU5ODJcdTRFMEJcdTRFRTNcdTc4MDFcdTRGMUFcdTYyOEEgPCBcdTVGNTNcdTUwNUFcdTY2NkVcdTkwMUFcdTdCMjZcdTUzRjdcdTgwMENcdTY1RTBcdTZDRDVcdThCQzZcdTUyMkJcdTUxODVcdTkwRThcdTc2ODQgZGl2IFx1NjgwN1x1N0I3RVxyXG4gICAgUkNEQVRBPTEsXHJcbiAgICAvLzxzdHlsZT5cdTMwMDE8eG1wPlx1MzAwMTxpZnJhbWU+XHUzMDAxPG5vZW1iZWQ+XHUzMDAxPG5vZnJhbWVzPlx1MzAwMTxub3NjcmlwdD4gXHU3QjQ5XHVGRjBDXHU0RTBFIFJDREFUQSBcdTZBMjFcdTVGMEZcdTdDN0JcdTRGM0NcdUZGMENcdTUzRUFcdTY2MkZcdTRFMERcdTY1MkZcdTYzMDEgSFRNTCBcdTVCOUVcdTRGNTNcclxuICAgIFJBV1RFWFQ9MixcclxuICAgIC8vPCFbQ0RBVEFbIFx1NUI1N1x1N0IyNlx1NEUzMiAgXHU0RUZCXHU0RjU1XHU1QjU3XHU3QjI2XHU5MEZEXHU0RjVDXHU0RTNBXHU2NjZFXHU5MDFBXHU1QjU3XHU3QjI2XHU1OTA0XHU3NDA2XHVGRjBDXHU3NkY0XHU1MjMwXHU5MDQ3XHU1MjMwIENEQVRBIFx1NzY4NFx1N0VEM1x1Njc1Rlx1NjgwN1x1NUZEN1x1NEUzQVx1NkI2MlxyXG4gICAgQ0RBVEE9MyxcclxuICAgIENPTU1FTlQ9NCwgLy9cdTZDRThcdTkxQ0FcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBUYWdTdGF0ZSA9IHsgLy9cdTY4MDdcdTdCN0VcdTZBMjFcdTVGMEZcclxuICAgIGluaXRpYWw6IDEsIC8vIFx1NTIxRFx1NTlDQlx1NzJCNlx1NjAwMVxyXG4gICAgdGFnT3BlbjogMiwgLy9cdTY4MDdcdTdCN0VcdTVGMDBcdTU5Q0JcdTcyQjZcdTYwMDFcclxuICAgIHRhZ05hbWU6IDMsIC8vIFx1NjgwN1x1N0I3RVx1NTQwRFx1NzlGMFx1NzJCNlx1NjAwMVxyXG4gICAgdGV4dDogNCwgLy9cdTY1ODdcdTY3MkNcdTcyQjZcdTYwMDFcclxuICAgIHRhZ0VuZDogNSwgLy9cdTdFRDNcdTY3NUZcdTY4MDdcdTdCN0VcdTcyQjZcdTYwMDFcclxuICAgIHRhZ0VuZE5hbWU6IDYgLy8gXHU3RUQzXHU2NzVGXHU2ODA3XHU3QjdFXHU1NDBEXHU3OUYwXHU3MkI2XHU2MDAxXHJcbn1cclxuXHJcbi8vXHU1MjA3XHU2MzYyXHU2NTg3XHU2NzJDXHU2QTIxXHU1RjBGXHJcbmV4cG9ydCBjb25zdCB0b2dnbGVNb2RlID0gKGNvbnRleHQsIG1vZGUpID0+IHtcclxuICAgIGNvbnRleHQub2xkTW9kZSA9IGNvbnRleHQubW9kZTtcclxuICAgIGNvbnRleHQubW9kZSA9IG1vZGU7XHJcbn1cclxuLy9cdTYwNjJcdTU5MERcdTZBMjFcdTVGMEZcclxuZXhwb3J0IGNvbnN0IHJldmVydE1vZGUgPSAoY29udGV4dCkgPT4ge1xyXG4gICAgY29udGV4dC5tb2RlID0gY29udGV4dC5vbGRNb2RlO1xyXG59XHJcbiIsICIvKlx1NjYyRlx1NTQyNlx1NEUzQVx1N0E3QSovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0V4aXN0cyhjb250ZXh0LCBhbmNlc3RvcnMpIHtcclxuICAgIHJldHVybiBjb250ZXh0LnNvdXJjZTtcclxufVxyXG4vL1x1NkQ4OFx1OEQzOVx1NjMwN1x1NUI5QVx1OERERFx1NzlCQlx1NTE4NVx1NUJCOVxyXG5leHBvcnQgZnVuY3Rpb24gYWR2YW5jZUJ5KGNvbnRleHQsIGJ5KSB7XHJcbiAgICBjb250ZXh0LnNvdXJjZSA9IGNvbnRleHQuc291cmNlLnNsaWNlKGJ5KTtcclxufVxyXG4vKioqIFx1NkQ4OFx1OEQzOVx1N0E3QVx1NjgzQyovXHJcbmV4cG9ydCBmdW5jdGlvbiBhZHZhbmNlU3BhY2VzKGNvbnRleHQpIHtcclxubGV0IHtzb3VyY2V9ID0gY29udGV4dDtcclxuICAgIGNvbnRleHQuc291cmNlID0gc291cmNlLnJlcGxhY2UoL15bXFxyXFxmXFx0XFxuIF0rLywgJycpO1xyXG59XHJcbiAgIiwgImltcG9ydCB7VGFnU3RhdGV9IGZyb20gJy4vaW5kZXgnXHJcblxyXG5leHBvcnQgY29uc3QgdW5hcnkgPSBbXHJcbiAgXCJiclwiLFxyXG4gIFwiaHJcIixcclxuICBcImltZ1wiLFxyXG4gIFwiaW5wdXRcIixcclxuICBcIm1ldGFcIixcclxuICBcImxpbmtcIixcclxuICBcImFyZWFcIixcclxuICBcImJhc2VcIixcclxuICBcImNvbFwiLFxyXG4gIFwiY29tbWFuZFwiLFxyXG4gIFwiZW1iZWRcIixcclxuICBcImtleWdlblwiLFxyXG4gIFwicGFyYW1cIixcclxuICBcInNvdXJjZVwiLFxyXG4gIFwidHJhY2tcIixcclxuICBcIndiclwiXHJcbl07XHJcbmV4cG9ydCBmdW5jdGlvbiBpc1VuYXJ5KHRhZ05hbWUpOiBib29sZWFuIHtcclxuICByZXR1cm4gdW5hcnkuaW5jbHVkZXModGFnTmFtZSk7XHJcbn1cclxuICBcclxuLypcdTdFRDNcdTY3NUZcdTY4MDdcdTdCN0UqL1xyXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VFbGVtZW50KGVsZW1lbnQpIHtcclxuICBpZihlbGVtZW50LnVuYXJ5KSB7XHJcbiAgICBlbGVtZW50LnRhZ1N0YXR1cyA9IFRhZ1N0YXRlLnRhZ0VuZDtcclxuICB9XHJcbn1cclxuLyoqXHJcbiAqIFx1NUJGOVx1NkJENFx1NTE0M1x1N0QyMFx1NjYyRlx1NTQyNlx1NzZGOFx1NTQwQ1x1N0M3Qlx1NTc4QlxyXG4gKiBAcGFyYW0gZWxlbWVudCBcclxuICogQHBhcmFtIGVsZW1lbnRUaGVuIFxyXG4gKiBAcmV0dXJucyBcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0VxdWFsRWxlbWVudFR5cGUoZWxlbWVudCwgZWxlbWVudFRoZW4pOiBib29sZWFuIHtcclxuICBpZihlbGVtZW50LnR5cGUgPT09IGVsZW1lbnRUaGVuLnR5cGUpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn0iLCAiZXhwb3J0IGZ1bmN0aW9uIGRlZXBDb3B5KG9iaiwgY2FjaGUgPSBuZXcgV2Vha01hcCgpKSB7XHJcbiAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTU3RkFcdTY3MkNcdTY1NzBcdTYzNkVcdTdDN0JcdTU3OEJcdTYyMTZcdTgwMDVudWxsXHVGRjBDXHU3NkY0XHU2M0E1XHU4RkQ0XHU1NkRFXHU1MzlGXHU1QkY5XHU4QzYxXHJcbiAgICBpZiAob2JqID09PSBudWxsIHx8IHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIFx1NjhDMFx1NjdFNVx1N0YxM1x1NUI1OFx1RkYwQ1x1OTA3Rlx1NTE0RFx1NjVFMFx1OTY1MFx1OTAxMlx1NUY1MlxyXG4gICAgaWYgKGNhY2hlLmhhcyhvYmopKSB7XHJcbiAgICAgIHJldHVybiBjYWNoZS5nZXQob2JqKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU2NUIwXHU3Njg0XHU1QkY5XHU4QzYxXHU2MjE2XHU2NTcwXHU3RUM0XHJcbiAgICBjb25zdCBjb3B5ID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTtcclxuICAgIFxyXG4gICAgLy8gXHU1QzA2XHU2NUIwXHU1QkY5XHU4QzYxXHU2REZCXHU1MkEwXHU1MjMwXHU3RjEzXHU1QjU4XHJcbiAgICBjYWNoZS5zZXQob2JqLCBjb3B5KTtcclxuICAgIFxyXG4gICAgLy8gXHU5MDEyXHU1RjUyXHU1NzMwXHU1OTBEXHU1MjM2XHU2QkNGXHU0RTJBXHU1QzVFXHU2MDI3XHJcbiAgICBmb3IgKGxldCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgIGNvcHlba2V5XSA9IGRlZXBDb3B5KG9ialtrZXldLCBjYWNoZSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjb3B5O1xyXG4gIH0iLCAiaW1wb3J0IHtUZXh0TW9kZXMsIFRhZ1N0YXRlLCBhZHZhbmNlQnksIGFkdmFuY2VTcGFjZXMsIGlzVW5hcnksIGNsb3NlRWxlbWVudCwgdG9nZ2xlTW9kZSwgcmV2ZXJ0TW9kZX0gZnJvbSAnLi91dGlscy9pbmRleCdcclxuaW1wb3J0IHtwYXJzZXJPcHRpb25zLCBwYXJzZXJDb250ZXh0LCBIVE1MTm9kZVR5cGUsIEVsZW1lbnROb2RlLCBUZXh0Tm9kZSwgUm9vdE5vZGUsIENvbW1lbnROb2RlLCBOb2RlfSBmcm9tICcuL3R5cGVzJ1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRva2VuaXplKHRlbXBsYXRlKSB7XHJcbiAgLyoqXHJcbiAgICogXHU4RjkzXHU1MTY1XHVGRjFBPGRpdj4xMjM8L2Rpdj5cclxuICAgKiBcdThGOTNcdTUxRkE6IFt7IHR5cGU6IHRhZ09wZW4sIHRhZ05hbWU6ICdkaXYnIH0sIHsgdHlwZTogdGV4dCwgY29udGVudDogJzEyMycgfSwgeyB0eXBlOiB0YWdFbmQsIHRhZ05hbWU6ICdkaXYnIH1dXHJcbiAgICovXHJcbiAgY29uc3QgdG9rZW5zID0gW107XHJcbiAgXHJcbiAgcmV0dXJuIHRva2VucztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEhUTUxQYXJzZXIge1xyXG4gIHByaXZhdGUgX29wdGlvbnM6IHBhcnNlck9wdGlvbnM7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9uczogcGFyc2VyT3B0aW9ucyA9IHt9KSB7XHJcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcclxuICB9XHJcbiAgcGFyc2VyKHRlbXBsYXRlKSB7XHJcbiAgICBjb25zdCByb290OiBSb290Tm9kZSA9IHtcclxuICAgICAgdHlwZTogSFRNTE5vZGVUeXBlLlJvb3QsXHJcbiAgICAgIGNoaWxkcmVuOiBbXVxyXG4gICAgfTtcclxuICAgIGNvbnN0IGNvbnRleHQ6IHBhcnNlckNvbnRleHQgPSB7XHJcbiAgICAgICAgc291cmNlOiB0ZW1wbGF0ZSxcclxuICAgICAgICBtb2RlOiBUZXh0TW9kZXMuREFUQSxcclxuICAgICAgICBvbGRNb2RlOiBUZXh0TW9kZXMuREFUQSxcclxuICAgICAgICB0eXBlOiBIVE1MTm9kZVR5cGUuUm9vdCxcclxuICAgICAgICBjaGlsZHJlbjogW10sXHJcbiAgICAgICAgcGFyZW50Tm9kZTogcm9vdCxcclxuICAgIH1cclxuICAgIHJvb3QuY2hpbGRyZW4gPSB0aGlzLnBhcnNlQ2hpbGRyZW4oY29udGV4dCk7XHJcbiAgICBcclxuICAgIHJldHVybiByb290XHJcbiAgfVxyXG4gIHBhcnNlQ2hpbGRyZW4oY29udGV4dCwgYW5jZXN0b3JzID0gW10pOiBOb2RlW10ge1xyXG4gICAgICBsZXQgbm9kZXM6IE5vZGVbXSA9IFtdO1xyXG4gICAgICAvLyBcdTRFQ0VcdTRFMEFcdTRFMEJcdTY1ODdcdTVCRjlcdThDNjFcdTRFMkRcdTUzRDZcdTVGOTdcdTVGNTNcdTUyNERcdTcyQjZcdTYwMDFcdUZGMENcdTUzMDVcdTYyRUNcdTZBMjFcdTVGMEYgbW9kZSBcdTU0OENcdTZBMjFcdTY3N0ZcdTUxODVcdTVCQjlcclxuICAgIFxyXG4gICAgICB3aGlsZSAodGhpcy5pc0VuZChjb250ZXh0LCBhbmNlc3RvcnMpKSB7XHJcbiAgICAgICAgY29uc3Qge21vZGUsIHNvdXJjZSwgcGFyZW50Tm9kZX0gPSBjb250ZXh0O1xyXG4gICAgICAgIGxldCBub2RlOy8vIFx1NTNFQVx1NjcwOSBEQVRBIFx1NkEyMVx1NUYwRlx1NTQ4QyBSQ0RBVEEgXHU2QTIxXHU1RjBGXHU2MjREXHU2NTJGXHU2MzAxXHU2M0QyXHU1MDNDXHU4MjgyXHU3MEI5XHU3Njg0XHU4OUUzXHU2NzkwXHJcbiAgICAgICAgaWYgKG1vZGUgPT09IFRleHRNb2Rlcy5EQVRBIHx8IG1vZGUgPT09IFRleHRNb2Rlcy5SQ0RBVEEpIHtcclxuICAgICAgICAgIC8vIFx1NTNFQVx1NjcwOSBEQVRBIFx1NkEyMVx1NUYwRlx1NjI0RFx1NjUyRlx1NjMwMVx1NjgwN1x1N0I3RVx1ODI4Mlx1NzBCOVx1NzY4NFx1ODlFM1x1Njc5MFxyXG4gICAgICAgICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKFwiPCFbQ0RBVEFbXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIENEQVRBXHJcbiAgICAgICAgICAgIHRvZ2dsZU1vZGUoY29udGV4dCwgVGV4dE1vZGVzLkNEQVRBKTtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICB9ZWxzZSBpZihtb2RlID09PSBUZXh0TW9kZXMuREFUQSAmJiBzb3VyY2VbMF0gPT09IFwiPFwiKSB7XHJcbiAgICAgICAgICAgIGlmKHNvdXJjZVsxXSA9PT0gJyEnKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKFwiPCEtLVwiKSkge1xyXG4gICAgICAgICAgICAgICAgLy9cdTZDRThcdTkxQ0FcclxuICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLnBhcnNlQ29tbWVudChjb250ZXh0LCBhbmNlc3RvcnMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2UgaWYoL1thLXpdL2kudGVzdChzb3VyY2VbMV0pKSB7XHJcbiAgICAgICAgICAgICAgLy9cdTY4MDdcdTdCN0VcclxuICAgICAgICAgICAgICBub2RlID0gdGhpcy5wYXJzZUVsZW1lbnQoY29udGV4dCwgYW5jZXN0b3JzKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoc291cmNlWzFdID09PSAnLycpIHtcclxuICAgICAgICAgICAgICAvL1x1N0VEM1x1Njc1Rlx1NjgwN1x1N0I3RVx1NzJCNlx1NjAwMVxyXG4gICAgICAgICAgICAgIHJldHVybiBub2RlcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfWVsc2UgaWYgKG1vZGUgPT09IFRleHRNb2Rlcy5SQ0RBVEEgfHwgbW9kZSA9PT0gVGV4dE1vZGVzLkRBVEEgJiYgc291cmNlWzFdID09PSBcIi9cIikge1xyXG4gICAgICAgICAgICAvL1x1N0VEM1x1Njc1Rlx1NjgwN1x1N0I3RVx1RkYwQ1x1OEZEOVx1OTFDQ1x1OTcwMFx1ODk4MVx1NjI5Qlx1NTFGQVx1OTUxOVx1OEJFRlx1RkYwQ1x1NTQwRVx1NjU4N1x1NEYxQVx1OEJFNlx1N0VDNlx1ODlFM1x1OTFDQVx1NTM5Rlx1NTZFMFxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJcdTRFMERcdTY2MkZEQVRBXHU2QTIxXHU1RjBGXCIpO1xyXG4gICAgICAgICAgfWVsc2UgaWYoc291cmNlLnN0YXJ0c1dpdGgoXCJ7e1wiKSkge1xyXG4gICAgICAgICAgICAvL1x1NjNEMlx1NTAzQ1x1ODlFM1x1Njc4NFxyXG4gICAgICAgICAgICBub2RlID0gdGhpcy5wYXJzZUludGVycG9sYXRpb24oY29udGV4dCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAvLyBub2RlIFx1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1OEJGNFx1NjYwRVx1NTkwNFx1NEU4RVx1NTE3Nlx1NEVENlx1NkEyMVx1NUYwRlx1RkYwQ1x1NTM3M1x1OTc1RSBEQVRBIFx1NkEyMVx1NUYwRlx1NEUxNFx1OTc1RSBSQ0RBVEEgXHU2QTIxXHU1RjBGXHJcbiAgICAgICAgICBpZighbm9kZSkge1xyXG4gICAgICAgICAgICBub2RlID0gdGhpcy5wYXJzZVRleHQoY29udGV4dCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBub2RlLnBhcmVudE5vZGUgPSBwYXJlbnROb2RlXHJcbiAgICAgICAgICBub2Rlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIH1lbHNlIGlmKG1vZGUgPT09IFRleHRNb2Rlcy5DREFUQSkge1xyXG4gICAgICAgICAgaWYgKHNvdXJjZS5zdGFydHNXaXRoKFwiPCFbQ0RBVEFbXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIENEQVRBXHJcbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLnBhcnNlQ0RBVEEoY29udGV4dCwgYW5jZXN0b3JzKTtcclxuICAgICAgICAgICAgcmV2ZXJ0TW9kZShjb250ZXh0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIG5vZGVzLnB1c2gobm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBub2RlcztcclxuICB9XHJcbiAgaXNFbmQoY29udGV4dCwgYW5jZXN0b3JzKSB7XHJcbiAgICAvL1x1NTE0M1x1N0QyMFx1NjgwOCxcdTVGNTNcdTUyNERcdTVCNTBcdTUxNDNcdTdEMjBcdTY3MDlcdTVCRjlcdTVFOTRcdTY4MDhcclxuICAgIC8vIGZvcihsZXQgaSA9IDA7IGkgPCBhbmNlc3RvcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIC8vICAgaWYoYW5jZXN0b3JzW2ldLnRhZykge1xyXG4gICAgLy8gICAgIHJldHVybiB0cnVlO1xyXG4gICAgLy8gICB9XHJcbiAgICAvLyB9XHJcbiAgICBpZihjb250ZXh0LnNvdXJjZSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgICBcclxuICBwYXJzZVRleHQoY29udGV4dCk6IFRleHROb2RlIHtcclxuICAgIGxldCB7bW9kZSwgc291cmNlfSA9IGNvbnRleHQ7XHJcbiAgICAvL1x1NTMzOVx1OTE0RFx1N0VBRlx1NjU4N1x1NjcyQ1xyXG4gICAgY29uc3QgbWF0Y2ggPSBzb3VyY2UubWF0Y2goL1tePD5dKi8pO1xyXG4gICAgbGV0IGNvbnRlbnQgPSAnJztcclxuICAgIGlmKG1hdGNoWzBdKSB7XHJcbiAgICAgIGFkdmFuY2VCeShjb250ZXh0LCBtYXRjaFswXS5sZW5ndGgpO1xyXG4gICAgICBjb250ZW50ID0gbWF0Y2hbMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBIVE1MTm9kZVR5cGUuVGV4dCxcclxuICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgcGFyZW50Tm9kZTogY29udGV4dC5wYXJlbnROb2RlXHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhcnNlSW50ZXJwb2xhdGlvbihjb250ZXh0KSB7XHJcbiAgICBjb25zdCB7c291cmNlfSA9IGNvbnRleHQ7XHJcbiAgICBjb25zdCBtYXRjaCA9IHNvdXJjZS5tYXRjaCgvXlxce1xce1xccyooLio/KVxccypcXH1cXH0vKTtcclxuICAgIGFkdmFuY2VCeShjb250ZXh0LCBtYXRjaFswXS5sZW5ndGgpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IEhUTUxOb2RlVHlwZS5JbnRlcnBvbGF0aW9uLFxyXG4gICAgICBjb250ZW50OiBbbWF0Y2hbMF0sIG1hdGNoWzFdXSxcclxuICAgICAgcGFyZW50Tm9kZTogY29udGV4dC5wYXJlbnROb2RlXHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhcnNlRWxlbWVudChjb250ZXh0LCBhbmNlc3RvcnMpOiBFbGVtZW50Tm9kZSB7XHJcbiAgICBsZXQge21vZGUsIHNvdXJjZX0gPSBjb250ZXh0O1xyXG4gIFxyXG4gICAgY29uc3QgbWF0Y2ggPSBzb3VyY2UubWF0Y2goLzwoW2Etel1bYS16QS1aLV0qKS8pO1xyXG4gICAgY29udGV4dC5zb3VyY2UgPSBzb3VyY2Uuc2xpY2UobWF0Y2hbMF0ubGVuZ3RoKTtcclxuICAgIGNvbnN0IHRhZ05hbWUgPSBtYXRjaFsxXTtcclxuICAgIGNvbnN0IGVsZW1lbnQgPSB7IC8vXHU4RkQ5XHU0RTJBXHU3MkI2XHU2MDAxXHU2ODA4XHVGRjBDXHU1QjUwXHU1MTQzXHU3RDIwXHU5NzAwXHU4OTgxXHU1MzM5XHU5MTREXHU1QjgzXHU2NjJGXHU1NDI2XHU5NzAwXHU4OTgxXHU5NUVEXHU1NDA4LFx1NjIxNlx1ODAwNVx1NUI4M1x1NTNFRlx1ODBGRFx1NjYyRlx1ODFFQVx1OTVFRFx1NTQwOFx1NzY4NFx1NjgwN1x1N0I3RVxyXG4gICAgICB0YWdTdGF0dXM6IFRhZ1N0YXRlLnRhZ05hbWUsIC8vXHU1MTg1XHU1QkI5XHU3MkI2XHU2MDAxXHJcbiAgICAgIHRhZ05hbWU6IHRhZ05hbWUsIC8vXHU2ODA3XHU3QjdFXHU1NDBEXHU3OUYwXHJcbiAgICAgIHVuYXJ5OiBmYWxzZSxcclxuICAgIH1cclxuICAgIGlmKGlzVW5hcnkodGFnTmFtZSkpIHtcclxuICAgICAgZWxlbWVudC51bmFyeSA9IHRydWU7XHJcbiAgICAgIGNsb3NlRWxlbWVudChlbGVtZW50KTtcclxuICAgIH1cclxuICBcclxuICAgIC8vMS5cdTUzMzlcdTkxNERcdTUxNDNcdTdEMjBcdTVDNUVcdTYwMjdcclxuICAgIGNvbnN0IGF0dHJzID0gdGhpcy5wYXJzZUF0dHJpYnV0ZShjb250ZXh0LCBlbGVtZW50KTtcclxuICAgIGNvbnN0IEVsZW1lbnROb2RlOiBFbGVtZW50Tm9kZSA9IHtcclxuICAgICAgdHlwZTogSFRNTE5vZGVUeXBlLkVsZW1lbnQsXHJcbiAgICAgIHRhZ05hbWU6IHRhZ05hbWUsXHJcbiAgICAgIGNoaWxkcmVuOiBbXSxcclxuICAgICAgYXR0cnM6IGF0dHJzLFxyXG4gICAgICBwYXJlbnROb2RlOiBjb250ZXh0LnBhcmVudE5vZGUsXHJcbiAgICB9XHJcblxyXG4gICAgaWYoIWVsZW1lbnQudW5hcnkpIHtcclxuICAgICAgYW5jZXN0b3JzLnB1c2goZWxlbWVudCk7XHJcbiAgICAgIC8vMi5cdTUzMzlcdTkxNERcdTUxNDNcdTdEMjBcdTUxODVcdTVCQjksIFx1NjcwOVx1NUI1MFx1NTE0M1x1N0QyMFx1NUMzMVx1NUYwMFx1NTQyRlx1NzJCNlx1NjAwMVx1NjczQVxyXG4gICAgICBlbGVtZW50LnRhZ1N0YXR1cyA9IFRhZ1N0YXRlLnRleHQ7XHJcbiAgICAgIC8vXHU1MzM5XHU5MTREXHU1QzNFXHU1REY0XHU1MTg1XHU1QkI5XHJcbiAgICAgIGNvbnN0IG1hdGNoVGFnRW5kID0gY29udGV4dC5zb3VyY2UubWF0Y2goYCguKj8pPFxcXFwvJHt0YWdOYW1lfT5gKTtcclxuICBcclxuICAgICAgaWYobWF0Y2hUYWdFbmQpIHtcclxuICAgICAgICBjb250ZXh0LnBhcmVudE5vZGUgPSBFbGVtZW50Tm9kZTtcclxuICAgICAgICBFbGVtZW50Tm9kZS5jaGlsZHJlbiA9IHRoaXMucGFyc2VDaGlsZHJlbihjb250ZXh0LCBhbmNlc3RvcnMpO1xyXG4gICAgICB9ZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiXHU2ODA3XHU3QjdFXHU1RkM1XHU5ODdCXHU4OTgxXHU2NzA5XHU3RUQzXHU2NzVGXCIpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IGFuY2VzdG9yID0gYW5jZXN0b3JzLnBvcCgpOyAvL1x1OTAwMFx1NTFGQVx1NjgwOFxyXG4gICAgICBpZihhbmNlc3Rvcikge1xyXG4gICAgICAgIGFkdmFuY2VCeShjb250ZXh0LCBhbmNlc3Rvci50YWdOYW1lLmxlbmd0aCsyKTtcclxuICAgICAgICBhZHZhbmNlU3BhY2VzKGNvbnRleHQpO1xyXG4gICAgICAgIGFkdmFuY2VCeShjb250ZXh0LCAxKTtcclxuICAgICAgfWVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlx1NEUwRFx1NTQwOFx1NkNENVx1NzY4NFx1NjgwN1x1N0I3RVwiKTtcclxuICAgICAgfVxyXG4gICAgICAvLzMuXHU1MzM5XHU5MTREPC8uLi4+XHJcbiAgICAgIC8vMi5cdTZEODhcdThEMzlcdTY1RjZcdUZGMENcdTY4QzBcdTZENEJcdTZBMjFcdTY3N0ZcdTY2MkZcdTU0MjZcdTVCNThcdTU3MjggLz5cdUZGMENcdTU5ODJcdTY3OUNcdTY3MDlcdTUyMTlcdTg4NjhcdTc5M0FcdTUxNzZcdTRFM0FcdTgxRUFcdTk1RURcdTU0MDhcdTY4MDdcdTdCN0VcdUZGMENcdTk3MDBcdTg5ODFcdTUwNUFcdTUxRkFcdTY4MDdcdTZDRThcclxuICAgICAgLy8zLlx1NUI4Q1x1NjIxMFx1NkI2M1x1NTIxOVx1NTMzOVx1OTE0RFx1NTQwRVx1RkYwQ1x1OTcwMFx1ODk4MVx1OEMwM1x1NzUyOCBhZHZhbmNlQnkgXHU1MUZEXHU2NTcwXHU2RDg4XHU4RDM5XHU3NTMxXHU2QjYzXHU1MjE5XHU1MzM5XHU5MTREXHU3Njg0XHU1MTY4XHU5MEU4XHU1MTg1XHU1QkI5XHJcbiAgICAgIC8vNC5cdTU5ODJcdTY3OUNcdTgxRUFcdTk1RURcdTU0MDhcdUZGMENcdTUyMTkgYWR2YW5jZUJ5IFx1NkQ4OFx1OEQzOSAvPlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEVsZW1lbnROb2RlO1xyXG4gIH1cclxuICBcclxuICBwYXJzZUF0dHJpYnV0ZShjb250ZXh0LCBlbGVtZW50KSB7XHJcbiAgICAvL1x1ODlFM1x1Njc5MFx1NUM1RVx1NjAyN1x1RkYwQ1x1NjMwN1x1NEVFNHYtaWYsdi1tb2RlbCxcdTRFOEJcdTRFRjZAZXZlbnQsIHYtb246ZXZlbnROYW1lLCB2OmJpbmQ6bmFtZS5zeW5jXHJcbiAgICBjb25zdCBhdHRyUmVnID0gLyg6P1thLXpBLVpdW2EtekEtWi1dKilcXHMqKD86KD0pXFxzKig/OihbXCInXSkoW15cIic8Pl0qKVxcM3woW15cXHNcIic8Pl0qKSkpPy9cclxuICBcclxuICAgIGNvbnN0IGF0dHJpYnV0ZXM6IHN0cmluZ1tdW10gPSBbXTtcclxuICAgIGFkdmFuY2VTcGFjZXMoY29udGV4dCk7XHJcbiAgICBsZXQgYXR0ck1hdGNoO1xyXG4gICAgd2hpbGUoY29udGV4dC5zb3VyY2VbMF0gIT09ICc8JyAmJiBjb250ZXh0LnNvdXJjZVswXSAhPT0gJz4nKSB7XHJcbiAgICAgIC8vXHU2RDg4XHU5NjY0XHU3QTdBXHU2ODNDXHJcbiAgICAgIGF0dHJNYXRjaCA9IGNvbnRleHQuc291cmNlLm1hdGNoKGF0dHJSZWcpO1xyXG4gIFxyXG4gICAgICBhZHZhbmNlQnkoY29udGV4dCwgYXR0ck1hdGNoWzBdLmxlbmd0aCk7IC8vXHU2RDg4XHU5NjY0XHU1QzVFXHU2MDI3XHJcbiAgXHJcbiAgICAgIC8vIFsndi1pZj1cImlzU2hvd1wiJywgJ3YtaWYnLCAnPScsICdpc1Nob3cnXSwgICBcclxuICAgICAgLy8gWydjbGFzcz1cImhlYWRlclwiJywgJ2NsYXNzJywgJz0nLCAnaGVhZGVyJ11cclxuICAgICAgYXR0cmlidXRlcy5wdXNoKFthdHRyTWF0Y2hbMF0sIGF0dHJNYXRjaFsxXSwgYXR0ck1hdGNoWzJdLCBhdHRyTWF0Y2hbNF1dKTtcclxuICBcclxuICAgICAgLy9cdTZEODhcdTk2NjRcdTdBN0FcdTY4M0NcclxuICAgICAgYWR2YW5jZVNwYWNlcyhjb250ZXh0KTtcclxuICAgICAgaWYoY29udGV4dC5zb3VyY2VbMF0gPT09ICcvJyAmJiBlbGVtZW50LnVuYXJ5KSB7XHJcbiAgICAgICAgLy9cdTgxRUFcdTk1RURcdTU0MDhcdTY4MDdcdTdCN0VcclxuICAgICAgICBhZHZhbmNlQnkoY29udGV4dCwgMSk7XHJcbiAgICAgIH1cclxuICAgICAgYWR2YW5jZVNwYWNlcyhjb250ZXh0KTtcclxuICAgIH1cclxuICAgIGFkdmFuY2VCeShjb250ZXh0LCAxKTsgLy9cdTZEODhcdTk2NjQ+XHJcbiAgXHJcbiAgICByZXR1cm4gYXR0cmlidXRlcztcclxuICB9XHJcbiAgLy9cdTZDRThcdTkxQ0FcclxuICBwYXJzZUNvbW1lbnQoY29udGV4dCwgYW5jZXN0b3JzKTogQ29tbWVudE5vZGUge1xyXG4gICAgbGV0IHtzb3VyY2V9ID0gY29udGV4dDtcclxuICAgIGxldCB2YWx1ZSA9ICcnOyAvL1x1NkNFOFx1OTFDQVx1NTE4NVx1NUJCOVxyXG4gIFxyXG4gICAgc291cmNlID0gc291cmNlLnNsaWNlKDQpO1xyXG4gICAgc291cmNlID0gc291cmNlLnJlcGxhY2UoLyhbXFxzXFxTXSo/KSgtLT4pLywgZnVuY3Rpb24obWF0Y2gsICQxLCAkMikge1xyXG4gICAgICB2YWx1ZSA9ICQxO1xyXG4gICAgICByZXR1cm4gJDIgPyAkMiA6ICcnO1xyXG4gICAgfSk7XHJcbiAgICBpZihzb3VyY2Uuc3RhcnRzV2l0aChcIi0tPlwiKSkge1xyXG4gICAgICBjb250ZXh0LnNvdXJjZSA9IHNvdXJjZS5zbGljZSgzKTtcclxuICAgIH1lbHNlIHtcclxuICAgICAgLy9cdTYyMTZcdTgwMDVcdTYyNEJcdTUyQThcdTk1RURcdTU0MDhcclxuICAgICAgdmFsdWUgPSBjb250ZXh0LnNvdXJjZTtcclxuICAgICAgY29udGV4dC5zb3VyY2UgPSAnJztcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHR5cGU6IEhUTUxOb2RlVHlwZS5Db21tZW50LFxyXG4gICAgICBjb250ZW50OiB2YWx1ZSxcclxuICAgICAgcGFyZW50Tm9kZTogY29udGV4dC5wYXJlbnROb2RlXHJcbiAgICB9XHJcbiAgfVxyXG4gIHBhcnNlQ0RBVEEoY29udGV4dCwgYW5jZXN0b3JzKSB7XHJcbiAgICBjb25zdCBjZGF0YU1hdGNoID0gY29udGV4dC5zb3VyY2UubWF0Y2goL148IVxcW0NEQVRBXFxbKFtcXHNcXFNdKj8pXFxdXFxdLyk7XHJcbiAgICBhZHZhbmNlQnkoY29udGV4dCwgY2RhdGFNYXRjaFswXS5sZW5ndGgpO1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0eXBlOiBIVE1MTm9kZVR5cGUuQ0RBVEEsXHJcbiAgICAgIGNvbnRlbnQ6IGNkYXRhTWF0Y2hbMV0sXHJcbiAgICAgIHBhcmVudE5vZGU6IGNvbnRleHQucGFyZW50Tm9kZVxyXG4gICAgfVxyXG4gIH1cclxufSIsICJpbXBvcnQge0hUTUxOb2RlVHlwZX0gZnJvbSAnLi4vY29yZS90eXBlcydcclxuLy8zLlx1NzUyOFx1Njc2NVx1NjgzOVx1NjM2RUphdmFTY3JpcHQgQVNUXHU3NTFGXHU2MjEwXHU2RTMyXHU2N0QzXHU1MUZEXHU2NTcwXHU0RUUzXHU3ODAxXHU3Njg0XHU3NTFGXHU2MjEwXHU1NjY4XHVGRjA4Z2VuZXJhdG9yXHVGRjA5XHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZShub2RlLCBvcHRpb25zPXt9KSB7XHJcbiAgICBpZiAobm9kZS50eXBlID09PSBIVE1MTm9kZVR5cGUuUm9vdCkge1xyXG4gICAgICAvLyBcdTU5MDRcdTc0MDZcdTY4MzlcdTgyODJcdTcwQjlcclxuICAgICAgcmV0dXJuIGdlbmVyYXRlQ2hpbGRyZW5Db2RlKG5vZGUuY2hpbGRyZW4pO1xyXG4gICAgfSBlbHNlIGlmIChub2RlLnR5cGUgPT09IEhUTUxOb2RlVHlwZS5FbGVtZW50KSB7XHJcbiAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTE0M1x1N0QyMFx1ODI4Mlx1NzBCOVxyXG4gICAgICBjb25zdCBhdHRycyA9IGdlbmVyYXRlQXR0cmlidXRlc0NvZGUobm9kZS5hdHRycyk7XHJcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gZ2VuZXJhdGVDaGlsZHJlbkNvZGUobm9kZS5jaGlsZHJlbik7XHJcbiAgICAgIHJldHVybiBgPCR7bm9kZS50YWdOYW1lfSR7YXR0cnN9PiR7Y2hpbGRyZW59PC8ke25vZGUudGFnTmFtZX0+YDtcclxuICAgIH0gZWxzZSBpZiAobm9kZS50eXBlID09PSBIVE1MTm9kZVR5cGUuVGV4dCkge1xyXG4gICAgICAvLyBcdTU5MDRcdTc0MDZcdTY1ODdcdTY3MkNcdTgyODJcdTcwQjlcclxuICAgICAgcmV0dXJuIG5vZGUuY29udGVudDtcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gZ2VuZXJhdGVBdHRyaWJ1dGVzQ29kZShhdHRycykge1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGF0dHJzKSB8fCBhdHRycy5sZW5ndGggPT09IDApIHtcclxuICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICcgJyArIGF0dHJzLm1hcChhdHRyID0+IGAke2F0dHIubmFtZX09XCIke2F0dHIudmFsdWV9XCJgKS5qb2luKCcgJyk7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGdlbmVyYXRlQ2hpbGRyZW5Db2RlKGNoaWxkcmVuKSB7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY2hpbGRyZW4pIHx8IGNoaWxkcmVuLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hpbGRyZW4ubWFwKGNoaWxkID0+IGdlbmVyYXRlKGNoaWxkKSkuam9pbignJyk7XHJcbiAgfSIsICJcclxuaW1wb3J0IHt0cmFuc2Zvcm1UZXh0LCB0cmFuc2Zvcm1EaWZmfSBmcm9tICcuLi90cmFuc2Zvcm0vaW5kZXgnO1xyXG5pbXBvcnQge2RlZXBDb3B5fSBmcm9tICcuL3V0aWxzL2luZGV4J1xyXG5pbXBvcnQgeyBnZW5lcmF0ZSB9IGZyb20gJy4vZ2VuZXJhdGUnO1xyXG5cclxuaW50ZXJmYWNlIHRyYW5zZm9ybU9wdGlvbnMge1xyXG4gICAgbm9kZVRyYW5zZm9ybXM/OiBGdW5jdGlvbltdIHwgW3N0cmluZywgRnVuY3Rpb25dLFxyXG4gICAgZGlyZWN0aXZlVHJhbnNmb3Jtcz86IE9iamVjdCxcclxuICAgIGRpZmZBc3Q/OiBPYmplY3RcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybShhc3QsIG9wdGlvbnM6IHRyYW5zZm9ybU9wdGlvbnMgPSB7fSkge1xyXG4gICAgY29uc3QgeyBub2RlVHJhbnNmb3JtcyA9IFtdLCBkaXJlY3RpdmVUcmFuc2Zvcm1zID0ge30sIGRpZmZBc3QgPSB7fSB9ID0gb3B0aW9ucztcclxuXHJcbiAgICBjb25zdCBjb250ZXh0ID0ge1xyXG4gICAgICAgIGFzdDogZGVlcENvcHkoYXN0KSxcclxuICAgICAgICBkaWZmQXN0OiBkZWVwQ29weShkaWZmQXN0KSxcclxuICAgICAgICBub2RlVHJhbnNmb3JtczogW1xyXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm1JZixcclxuICAgICAgICAgICAgLy8gdHJhbnNmb3JtRm9yLFxyXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm1UZXh0LFxyXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm1EaWZmLFxyXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm1FbGVtZW50LFxyXG4gICAgICAgICAgICAuLi5ub2RlVHJhbnNmb3Jtcy5maWx0ZXIoaXRlbSA9PiBBcnJheS5pc0FycmF5KGl0ZW0pID8gaXRlbVswXSAhPT0gJ2FsbCcgOiB0cnVlKSxcclxuICAgICAgICBdLFxyXG4gICAgICAgIGRpcmVjdGl2ZVRyYW5zZm9ybXM6IHtcclxuICAgICAgICAgICAgLy8gb246IHRyYW5zZm9ybU9uLFxyXG4gICAgICAgICAgICAvLyBiaW5kOiB0cmFuc2Zvcm1CaW5kLFxyXG4gICAgICAgICAgICAvLyBtb2RlbDogdHJhbnNmb3JtTW9kZWxcclxuICAgICAgICAgICAgLi4uZGlyZWN0aXZlVHJhbnNmb3Jtc1xyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbiAgICBjb25zdCBub2RlVHJhbnNmb3JtQWxsID0gbm9kZVRyYW5zZm9ybXMuZmlsdGVyKGl0ZW0gPT4gQXJyYXkuaXNBcnJheShpdGVtKSAmJiBpdGVtWzBdID09PSAnYWxsJykuZmxhdE1hcChmID0+IGZbMV0pO1xyXG4gICAgY2FsbE5vZGVUcmFuc2Zvcm1zKGNvbnRleHQuYXN0LCB7XHJcbiAgICAgICAgLi4uY29udGV4dCxcclxuICAgICAgICBub2RlVHJhbnNmb3Jtczogbm9kZVRyYW5zZm9ybUFsbFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy9cdTkwNERcdTUzODZcdTY4MTFcdTdFRDNcdTY3ODRcdUZGMENcdTVFNzZcdThDMDNcdTc1MjhcdTYzRDJcdTRFRjZcdTUxRkRcdTY1NzBcclxuICAgIHRyYXZlcnNlTm9kZShjb250ZXh0LmFzdCwgY29udGV4dCk7XHJcbiAgICByZXR1cm4gZ2VuZXJhdGUoY29udGV4dC5hc3QsIG9wdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYWxsTm9kZVRyYW5zZm9ybXMobm9kZSwgY29udGV4dCkge1xyXG4gICAgY29uc3QgeyBub2RlVHJhbnNmb3Jtcywgb25FbnRlciwgb25FeGl0IH0gPSBjb250ZXh0O1xyXG4gICAgY29uc3QgZXhpdEZuczogRnVuY3Rpb25bXSA9IFtdOyAvL1x1OTAwMFx1NTFGQVx1NTFGRFx1NjU3MFxyXG4gICAgXHJcbiAgICB0eXBlb2Ygb25FbnRlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvbkVudGVyKG5vZGUsIGNvbnRleHQpO1xyXG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG5vZGVUcmFuc2Zvcm1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3Qgb25FeGl0ID0gbm9kZVRyYW5zZm9ybXNbaV0obm9kZSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYob25FeGl0KSB7XHJcbiAgICAgICAgICAgIGlmKEFycmF5LmlzQXJyYXkob25FeGl0KSkge1xyXG4gICAgICAgICAgICAgICAgZXhpdEZucy5wdXNoKC4uLm9uRXhpdCk7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIGV4aXRGbnMucHVzaChvbkV4aXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdHlwZW9mIG9uRXhpdCA9PT0gJ2Z1bmN0aW9uJyAmJiBvbkV4aXQobm9kZSwgY29udGV4dCk7XHJcbiAgICBsZXQgaSA9IGV4aXRGbnMubGVuZ3RoO1xyXG5cclxuICAgIC8vXHU5MDA2XHU1NDExXHU2MjY3XHU4ODRDXHU4RjkzXHU1MUZBXHU1MUZEXHU2NTcwLFx1NTE0OFx1OEZEQlx1NTE0OFx1NTFGQVxyXG4gICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgIGV4aXRGbnNbaV0oKTtcclxuICAgIH1cclxufSBcclxuXHJcbi8vXHU5MDREXHU1Mzg2QVNUXHJcbmZ1bmN0aW9uIHRyYXZlcnNlTm9kZShub2RlLCBjb250ZXh0KSB7XHJcbiAgICBjYWxsTm9kZVRyYW5zZm9ybXMobm9kZSwge1xyXG4gICAgICAgIC4uLmNvbnRleHQsXHJcbiAgICAgICAgb25FbnRlcjogKCkgPT4ge1xyXG4gICAgICAgICAgICBjb250ZXh0LmN1cnJlbnROb2RlID0gbm9kZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRXhpdDogKCkgPT4ge1xyXG4gICAgICAgICAgICB0cmF2ZXJzZUNoaWxkcmVuKG5vZGUsIGNvbnRleHQpO1xyXG4gICAgICAgICAgICBjb250ZXh0LmN1cnJlbnROb2RlID0gbm9kZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiB0cmF2ZXJzZUNoaWxkcmVuKG5vZGUsIGNvbnRleHQpIHtcclxuICAgIC8vIFx1OTAxMlx1NUY1Mlx1OTA0RFx1NTM4Nlx1NUI1MFx1NjU3MFx1N0VDNFxyXG4gICAgaWYobm9kZS5jaGlsZHJlbil7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdHJhdmVyc2VOb2RlKG5vZGUuY2hpbGRyZW5baV0sIGNvbnRleHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdLAogICJtYXBwaW5ncyI6ICI7QUFrQk8sSUFBTSxXQUFXO0FBQUE7QUFBQSxFQUNwQixTQUFTO0FBQUE7QUFBQSxFQUNULFNBQVM7QUFBQTtBQUFBLEVBQ1QsU0FBUztBQUFBO0FBQUEsRUFDVCxNQUFNO0FBQUE7QUFBQSxFQUNOLFFBQVE7QUFBQTtBQUFBLEVBQ1IsWUFBWTtBQUFBO0FBQ2hCO0FBR08sSUFBTSxhQUFhLENBQUMsU0FBUyxTQUFTO0FBQ3pDLFVBQVEsVUFBVSxRQUFRO0FBQzFCLFVBQVEsT0FBTztBQUNuQjtBQUVPLElBQU0sYUFBYSxDQUFDLFlBQVk7QUFDbkMsVUFBUSxPQUFPLFFBQVE7QUFDM0I7OztBQzlCTyxTQUFTLFVBQVUsU0FBUyxJQUFJO0FBQ25DLFVBQVEsU0FBUyxRQUFRLE9BQU8sTUFBTSxFQUFFO0FBQzVDO0FBRU8sU0FBUyxjQUFjLFNBQVM7QUFDdkMsTUFBSSxFQUFDLE9BQU0sSUFBSTtBQUNYLFVBQVEsU0FBUyxPQUFPLFFBQVEsaUJBQWlCLEVBQUU7QUFDdkQ7OztBQ1ZPLElBQU0sUUFBUTtBQUFBLEVBQ25CO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQUEsRUFDQTtBQUFBLEVBQ0E7QUFBQSxFQUNBO0FBQ0Y7QUFDTyxTQUFTLFFBQVEsU0FBa0I7QUFDeEMsU0FBTyxNQUFNLFNBQVMsT0FBTztBQUMvQjtBQUdPLFNBQVMsYUFBYSxTQUFTO0FBQ3BDLE1BQUcsUUFBUSxPQUFPO0FBQ2hCLFlBQVEsWUFBWSxTQUFTO0FBQUEsRUFDL0I7QUFDRjs7O0FDN0JPLFNBQVMsU0FBUyxLQUFLLFFBQVEsb0JBQUksUUFBUSxHQUFHO0FBRWpELE1BQUksUUFBUSxRQUFRLE9BQU8sUUFBUSxVQUFVO0FBQzNDLFdBQU87QUFBQSxFQUNUO0FBR0EsTUFBSSxNQUFNLElBQUksR0FBRyxHQUFHO0FBQ2xCLFdBQU8sTUFBTSxJQUFJLEdBQUc7QUFBQSxFQUN0QjtBQUdBLFFBQU0sT0FBTyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBR3hDLFFBQU0sSUFBSSxLQUFLLElBQUk7QUFHbkIsV0FBUyxPQUFPLEtBQUs7QUFDbkIsU0FBSyxHQUFHLElBQUksU0FBUyxJQUFJLEdBQUcsR0FBRyxLQUFLO0FBQUEsRUFDdEM7QUFFQSxTQUFPO0FBQ1Q7OztBQ3BCSyxTQUFTLFNBQVMsVUFBVTtBQUtqQyxRQUFNLFNBQVMsQ0FBQztBQUVoQixTQUFPO0FBQ1Q7QUFFTyxJQUFNLGFBQU4sTUFBaUI7QUFBQSxFQUNkO0FBQUEsRUFDUixZQUFZLFVBQXlCLENBQUMsR0FBRztBQUN2QyxTQUFLLFdBQVc7QUFBQSxFQUNsQjtBQUFBLEVBQ0EsT0FBTyxVQUFVO0FBQ2YsVUFBTSxPQUFpQjtBQUFBLE1BQ3JCO0FBQUEsTUFDQSxVQUFVLENBQUM7QUFBQSxJQUNiO0FBQ0EsVUFBTSxVQUF5QjtBQUFBLE1BQzNCLFFBQVE7QUFBQSxNQUNSO0FBQUEsTUFDQTtBQUFBLE1BQ0E7QUFBQSxNQUNBLFVBQVUsQ0FBQztBQUFBLE1BQ1gsWUFBWTtBQUFBLElBQ2hCO0FBQ0EsU0FBSyxXQUFXLEtBQUssY0FBYyxPQUFPO0FBRTFDLFdBQU87QUFBQSxFQUNUO0FBQUEsRUFDQSxjQUFjLFNBQVMsWUFBWSxDQUFDLEdBQVc7QUFDM0MsUUFBSSxRQUFnQixDQUFDO0FBR3JCLFdBQU8sS0FBSyxNQUFNLFNBQVMsU0FBUyxHQUFHO0FBQ3JDLFlBQU0sRUFBQyxNQUFNLFFBQVEsV0FBVSxJQUFJO0FBQ25DLFVBQUk7QUFDSixVQUFJLHlCQUEyQix5QkFBMkI7QUFFeEQsWUFBSSxPQUFPLFdBQVcsV0FBVyxHQUFHO0FBRWxDLHFCQUFXLHNCQUF3QjtBQUNuQztBQUFBLFFBQ0YsV0FBUyx5QkFBMkIsT0FBTyxDQUFDLE1BQU0sS0FBSztBQUNyRCxjQUFHLE9BQU8sQ0FBQyxNQUFNLEtBQUs7QUFDcEIsZ0JBQUksT0FBTyxXQUFXLE1BQU0sR0FBRztBQUU3QixxQkFBTyxLQUFLLGFBQWEsU0FBUyxTQUFTO0FBQUEsWUFDN0M7QUFBQSxVQUNGLFdBQVMsU0FBUyxLQUFLLE9BQU8sQ0FBQyxDQUFDLEdBQUc7QUFFakMsbUJBQU8sS0FBSyxhQUFhLFNBQVMsU0FBUztBQUFBLFVBQzdDLFdBQVMsT0FBTyxDQUFDLE1BQU0sS0FBSztBQUUxQixtQkFBTztBQUFBLFVBQ1Q7QUFBQSxRQUNGLFdBQVUsMkJBQTZCLHlCQUEyQixPQUFPLENBQUMsTUFBTSxLQUFLO0FBRW5GLGdCQUFNLElBQUksTUFBTSw4QkFBVTtBQUFBLFFBQzVCLFdBQVMsT0FBTyxXQUFXLElBQUksR0FBRztBQUVoQyxpQkFBTyxLQUFLLG1CQUFtQixPQUFPO0FBQUEsUUFDeEM7QUFFQSxZQUFHLENBQUMsTUFBTTtBQUNSLGlCQUFPLEtBQUssVUFBVSxPQUFPO0FBQUEsUUFDL0I7QUFDQSxhQUFLLGFBQWE7QUFDbEIsY0FBTSxLQUFLLElBQUk7QUFBQSxNQUNqQixXQUFTLHdCQUEwQjtBQUNqQyxZQUFJLE9BQU8sV0FBVyxXQUFXLEdBQUc7QUFFbEMsaUJBQU8sS0FBSyxXQUFXLFNBQVMsU0FBUztBQUN6QyxxQkFBVyxPQUFPO0FBQUEsUUFDcEI7QUFDQSxjQUFNLEtBQUssSUFBSTtBQUFBLE1BQ2pCO0FBQUEsSUFDRjtBQUNBLFdBQU87QUFBQSxFQUNYO0FBQUEsRUFDQSxNQUFNLFNBQVMsV0FBVztBQU94QixRQUFHLFFBQVEsUUFBUTtBQUNqQixhQUFPO0FBQUEsSUFDVDtBQUFBLEVBQ0Y7QUFBQSxFQUVBLFVBQVUsU0FBbUI7QUFDM0IsUUFBSSxFQUFDLE1BQU0sT0FBTSxJQUFJO0FBRXJCLFVBQU0sUUFBUSxPQUFPLE1BQU0sUUFBUTtBQUNuQyxRQUFJLFVBQVU7QUFDZCxRQUFHLE1BQU0sQ0FBQyxHQUFHO0FBQ1gsZ0JBQVUsU0FBUyxNQUFNLENBQUMsRUFBRSxNQUFNO0FBQ2xDLGdCQUFVLE1BQU0sQ0FBQztBQUFBLElBQ25CO0FBQ0EsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBO0FBQUEsTUFDQSxZQUFZLFFBQVE7QUFBQSxJQUN0QjtBQUFBLEVBQ0Y7QUFBQSxFQUNBLG1CQUFtQixTQUFTO0FBQzFCLFVBQU0sRUFBQyxPQUFNLElBQUk7QUFDakIsVUFBTSxRQUFRLE9BQU8sTUFBTSxzQkFBc0I7QUFDakQsY0FBVSxTQUFTLE1BQU0sQ0FBQyxFQUFFLE1BQU07QUFFbEMsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQztBQUFBLE1BQzVCLFlBQVksUUFBUTtBQUFBLElBQ3RCO0FBQUEsRUFDRjtBQUFBLEVBQ0EsYUFBYSxTQUFTLFdBQXdCO0FBQzVDLFFBQUksRUFBQyxNQUFNLE9BQU0sSUFBSTtBQUVyQixVQUFNLFFBQVEsT0FBTyxNQUFNLG9CQUFvQjtBQUMvQyxZQUFRLFNBQVMsT0FBTyxNQUFNLE1BQU0sQ0FBQyxFQUFFLE1BQU07QUFDN0MsVUFBTSxVQUFVLE1BQU0sQ0FBQztBQUN2QixVQUFNLFVBQVU7QUFBQTtBQUFBLE1BQ2QsV0FBVyxTQUFTO0FBQUE7QUFBQSxNQUNwQjtBQUFBO0FBQUEsTUFDQSxPQUFPO0FBQUEsSUFDVDtBQUNBLFFBQUcsUUFBUSxPQUFPLEdBQUc7QUFDbkIsY0FBUSxRQUFRO0FBQ2hCLG1CQUFhLE9BQU87QUFBQSxJQUN0QjtBQUdBLFVBQU0sUUFBUSxLQUFLLGVBQWUsU0FBUyxPQUFPO0FBQ2xELFVBQU1BLGVBQTJCO0FBQUEsTUFDL0I7QUFBQSxNQUNBO0FBQUEsTUFDQSxVQUFVLENBQUM7QUFBQSxNQUNYO0FBQUEsTUFDQSxZQUFZLFFBQVE7QUFBQSxJQUN0QjtBQUVBLFFBQUcsQ0FBQyxRQUFRLE9BQU87QUFDakIsZ0JBQVUsS0FBSyxPQUFPO0FBRXRCLGNBQVEsWUFBWSxTQUFTO0FBRTdCLFlBQU0sY0FBYyxRQUFRLE9BQU8sTUFBTSxZQUFZLE9BQU8sR0FBRztBQUUvRCxVQUFHLGFBQWE7QUFDZCxnQkFBUSxhQUFhQTtBQUNyQixRQUFBQSxhQUFZLFdBQVcsS0FBSyxjQUFjLFNBQVMsU0FBUztBQUFBLE1BQzlELE9BQU07QUFDSixjQUFNLElBQUksTUFBTSxrREFBVTtBQUFBLE1BQzVCO0FBQ0EsWUFBTSxXQUFXLFVBQVUsSUFBSTtBQUMvQixVQUFHLFVBQVU7QUFDWCxrQkFBVSxTQUFTLFNBQVMsUUFBUSxTQUFPLENBQUM7QUFDNUMsc0JBQWMsT0FBTztBQUNyQixrQkFBVSxTQUFTLENBQUM7QUFBQSxNQUN0QixPQUFNO0FBQ0osY0FBTSxJQUFJLE1BQU0sc0NBQVE7QUFBQSxNQUMxQjtBQUFBLElBS0Y7QUFDQSxXQUFPQTtBQUFBLEVBQ1Q7QUFBQSxFQUVBLGVBQWUsU0FBUyxTQUFTO0FBRS9CLFVBQU0sVUFBVTtBQUVoQixVQUFNLGFBQXlCLENBQUM7QUFDaEMsa0JBQWMsT0FBTztBQUNyQixRQUFJO0FBQ0osV0FBTSxRQUFRLE9BQU8sQ0FBQyxNQUFNLE9BQU8sUUFBUSxPQUFPLENBQUMsTUFBTSxLQUFLO0FBRTVELGtCQUFZLFFBQVEsT0FBTyxNQUFNLE9BQU87QUFFeEMsZ0JBQVUsU0FBUyxVQUFVLENBQUMsRUFBRSxNQUFNO0FBSXRDLGlCQUFXLEtBQUssQ0FBQyxVQUFVLENBQUMsR0FBRyxVQUFVLENBQUMsR0FBRyxVQUFVLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDO0FBR3hFLG9CQUFjLE9BQU87QUFDckIsVUFBRyxRQUFRLE9BQU8sQ0FBQyxNQUFNLE9BQU8sUUFBUSxPQUFPO0FBRTdDLGtCQUFVLFNBQVMsQ0FBQztBQUFBLE1BQ3RCO0FBQ0Esb0JBQWMsT0FBTztBQUFBLElBQ3ZCO0FBQ0EsY0FBVSxTQUFTLENBQUM7QUFFcEIsV0FBTztBQUFBLEVBQ1Q7QUFBQTtBQUFBLEVBRUEsYUFBYSxTQUFTLFdBQXdCO0FBQzVDLFFBQUksRUFBQyxPQUFNLElBQUk7QUFDZixRQUFJLFFBQVE7QUFFWixhQUFTLE9BQU8sTUFBTSxDQUFDO0FBQ3ZCLGFBQVMsT0FBTyxRQUFRLG1CQUFtQixTQUFTLE9BQU8sSUFBSSxJQUFJO0FBQ2pFLGNBQVE7QUFDUixhQUFPLEtBQUssS0FBSztBQUFBLElBQ25CLENBQUM7QUFDRCxRQUFHLE9BQU8sV0FBVyxLQUFLLEdBQUc7QUFDM0IsY0FBUSxTQUFTLE9BQU8sTUFBTSxDQUFDO0FBQUEsSUFDakMsT0FBTTtBQUVKLGNBQVEsUUFBUTtBQUNoQixjQUFRLFNBQVM7QUFBQSxJQUNuQjtBQUNBLFdBQU87QUFBQSxNQUNMO0FBQUEsTUFDQSxTQUFTO0FBQUEsTUFDVCxZQUFZLFFBQVE7QUFBQSxJQUN0QjtBQUFBLEVBQ0Y7QUFBQSxFQUNBLFdBQVcsU0FBUyxXQUFXO0FBQzdCLFVBQU0sYUFBYSxRQUFRLE9BQU8sTUFBTSw0QkFBNEI7QUFDcEUsY0FBVSxTQUFTLFdBQVcsQ0FBQyxFQUFFLE1BQU07QUFFdkMsV0FBTztBQUFBLE1BQ0w7QUFBQSxNQUNBLFNBQVMsV0FBVyxDQUFDO0FBQUEsTUFDckIsWUFBWSxRQUFRO0FBQUEsSUFDdEI7QUFBQSxFQUNGO0FBQ0Y7OztBQzlPTyxTQUFTLFNBQVMsTUFBTSxVQUFRLENBQUMsR0FBRztBQUN2QyxNQUFJLEtBQUssNEJBQTRCO0FBRW5DLFdBQU8scUJBQXFCLEtBQUssUUFBUTtBQUFBLEVBQzNDLFdBQVcsS0FBSyxrQ0FBK0I7QUFFN0MsVUFBTSxRQUFRLHVCQUF1QixLQUFLLEtBQUs7QUFDL0MsVUFBTSxXQUFXLHFCQUFxQixLQUFLLFFBQVE7QUFDbkQsV0FBTyxJQUFJLEtBQUssT0FBTyxHQUFHLEtBQUssSUFBSSxRQUFRLEtBQUssS0FBSyxPQUFPO0FBQUEsRUFDOUQsV0FBVyxLQUFLLDRCQUE0QjtBQUUxQyxXQUFPLEtBQUs7QUFBQSxFQUNkO0FBQ0Y7QUFFQSxTQUFTLHVCQUF1QixPQUFPO0FBQ3JDLE1BQUksQ0FBQyxNQUFNLFFBQVEsS0FBSyxLQUFLLE1BQU0sV0FBVyxHQUFHO0FBQy9DLFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTyxNQUFNLE1BQU0sSUFBSSxVQUFRLEdBQUcsS0FBSyxJQUFJLEtBQUssS0FBSyxLQUFLLEdBQUcsRUFBRSxLQUFLLEdBQUc7QUFDekU7QUFFQSxTQUFTLHFCQUFxQixVQUFVO0FBQ3RDLE1BQUksQ0FBQyxNQUFNLFFBQVEsUUFBUSxLQUFLLFNBQVMsV0FBVyxHQUFHO0FBQ3JELFdBQU87QUFBQSxFQUNUO0FBQ0EsU0FBTyxTQUFTLElBQUksV0FBUyxTQUFTLEtBQUssQ0FBQyxFQUFFLEtBQUssRUFBRTtBQUN2RDs7O0FDbEJLLFNBQVMsVUFBVSxLQUFLLFVBQTRCLENBQUMsR0FBRztBQUMzRCxRQUFNLEVBQUUsaUJBQWlCLENBQUMsR0FBRyxzQkFBc0IsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxFQUFFLElBQUk7QUFFeEUsUUFBTSxVQUFVO0FBQUEsSUFDWixLQUFLLFNBQVMsR0FBRztBQUFBLElBQ2pCLFNBQVMsU0FBUyxPQUFPO0FBQUEsSUFDekIsZ0JBQWdCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLE1BTVosR0FBRyxlQUFlLE9BQU8sVUFBUSxNQUFNLFFBQVEsSUFBSSxJQUFJLEtBQUssQ0FBQyxNQUFNLFFBQVEsSUFBSTtBQUFBLElBQ25GO0FBQUEsSUFDQSxxQkFBcUI7QUFBQTtBQUFBO0FBQUE7QUFBQSxNQUlqQixHQUFHO0FBQUEsSUFDUDtBQUFBLEVBQ0o7QUFDQSxRQUFNLG1CQUFtQixlQUFlLE9BQU8sVUFBUSxNQUFNLFFBQVEsSUFBSSxLQUFLLEtBQUssQ0FBQyxNQUFNLEtBQUssRUFBRSxRQUFRLE9BQUssRUFBRSxDQUFDLENBQUM7QUFDbEgscUJBQW1CLFFBQVEsS0FBSztBQUFBLElBQzVCLEdBQUc7QUFBQSxJQUNILGdCQUFnQjtBQUFBLEVBQ3BCLENBQUM7QUFHRCxlQUFhLFFBQVEsS0FBSyxPQUFPO0FBQ2pDLFNBQU8sU0FBUyxRQUFRLEtBQUssT0FBTztBQUN4QztBQUVBLFNBQVMsbUJBQW1CLE1BQU0sU0FBUztBQUN2QyxRQUFNLEVBQUUsZ0JBQWdCLFNBQVMsT0FBTyxJQUFJO0FBQzVDLFFBQU0sVUFBc0IsQ0FBQztBQUU3QixTQUFPLFlBQVksY0FBYyxRQUFRLE1BQU0sT0FBTztBQUN0RCxXQUFRQyxLQUFJLEdBQUdBLEtBQUksZUFBZSxRQUFRQSxNQUFLO0FBQzNDLFVBQU1DLFVBQVMsZUFBZUQsRUFBQyxFQUFFLE1BQU0sT0FBTztBQUM5QyxRQUFHQyxTQUFRO0FBQ1AsVUFBRyxNQUFNLFFBQVFBLE9BQU0sR0FBRztBQUN0QixnQkFBUSxLQUFLLEdBQUdBLE9BQU07QUFBQSxNQUMxQixPQUFNO0FBQ0YsZ0JBQVEsS0FBS0EsT0FBTTtBQUFBLE1BQ3ZCO0FBQUEsSUFDSjtBQUFBLEVBQ0o7QUFDQSxTQUFPLFdBQVcsY0FBYyxPQUFPLE1BQU0sT0FBTztBQUNwRCxNQUFJLElBQUksUUFBUTtBQUdoQixTQUFPLEtBQUs7QUFDUixZQUFRLENBQUMsRUFBRTtBQUFBLEVBQ2Y7QUFDSjtBQUdBLFNBQVMsYUFBYSxNQUFNLFNBQVM7QUFDakMscUJBQW1CLE1BQU07QUFBQSxJQUNyQixHQUFHO0FBQUEsSUFDSCxTQUFTLE1BQU07QUFDWCxjQUFRLGNBQWM7QUFBQSxJQUMxQjtBQUFBLElBQ0EsUUFBUSxNQUFNO0FBQ1YsdUJBQWlCLE1BQU0sT0FBTztBQUM5QixjQUFRLGNBQWM7QUFBQSxJQUMxQjtBQUFBLEVBQ0osQ0FBQztBQUNMO0FBQ0EsU0FBUyxpQkFBaUIsTUFBTSxTQUFTO0FBRXJDLE1BQUcsS0FBSyxVQUFTO0FBQ2IsYUFBUSxJQUFJLEdBQUcsSUFBSSxLQUFLLFNBQVMsUUFBUSxLQUFLO0FBQzFDLG1CQUFhLEtBQUssU0FBUyxDQUFDLEdBQUcsT0FBTztBQUFBLElBQzFDO0FBQUEsRUFDSjtBQUNKOyIsCiAgIm5hbWVzIjogWyJFbGVtZW50Tm9kZSIsICJpIiwgIm9uRXhpdCJdCn0K
